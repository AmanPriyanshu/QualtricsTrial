<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Sharing Preferences</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #2c3e50;
        }

        .category-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }

        .category-main {
            margin-bottom: 1.5rem;
        }

        .category-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .checkbox-label {
            flex: 1;
        }

        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        input[type="checkbox"] {
            margin-top: 0.3rem;
            width: 18px;
            height: 18px;
        }

        .data-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .description-container {
            position: relative;
            margin-left: 2rem;
        }

        .data-description {
            color: #666;
            font-size: 0.95rem;
            overflow: hidden;
            max-height: 3em;
            transition: max-height 0.3s ease;
        }

        .data-description.expanded {
            max-height: 500px;
        }

        .read-more {
            color: #4a90e2;
            cursor: pointer;
            font-size: 0.9rem;
            display: block;
            margin-top: 0.5rem;
        }

        .read-more:hover {
            text-decoration: underline;
        }

        .sub-options-toggle {
            color: #4a90e2;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sub-options-toggle:hover {
            text-decoration: underline;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 0.8rem;
        }

        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        .sub-options {
            margin-left: 2rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .sub-options.expanded {
            max-height: 2000px;
            transition: max-height 0.3s ease-in;
        }

        .data-point {
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .sub-options.expanded .data-point {
            opacity: 1;
            transform: translateY(0);
        }

        .button-container {
            margin-top: 2rem;
            text-align: right;
        }

        .next-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .next-button:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Data Sharing Preferences</h1>
        <div id="options-container">
            <!-- Content will be dynamically inserted here -->
        </div>
        <div class="button-container">
            <button class="next-button">Next</button>
        </div>
    </div>

    <script>
        // Content object remains the same
        const pageContent = {
            categories: [
                {
                    id: "personal_info",
                    title: "Personally Identifiable Information",
                    description: "This section covers your essential banking identifiers - the basic information needed to identify you and your accounts securely. We need these details to comply with banking regulations and ensure secure transactions. We use advanced privacy technology to verify this information without actually storing or seeing the details themselves, keeping your personal data protected.",
                    dataPoints: [
                        {
                            id: "pan",
                            title: "Permanent Account Number of the user",
                            description: "Your PAN (Permanent Account Number) is a government-issued ID number for tax purposes."
                        },
                        {
                            id: "account_number",
                            title: "Bank account number of the user",
                            description: "This is your unique bank account identifier."
                        },
                        {
                            id: "account_type",
                            title: "Bank account type of the user",
                            description: "Whether your account is savings, current, or fixed deposit."
                        }
                    ]
                },
                {
                    id: "balances",
                    title: "Account Balances",
                    description: "This section is about how much money you have in your accounts at different times. We use privacy technology to check your balances securely when needed, without keeping ongoing records of your money. This helps us ensure transactions are possible while protecting your financial privacy.",
                    dataPoints: [
                        {
                            id: "current_balance",
                            title: "Amount value of the account as of the latest date",
                            description: "Your present account balance."
                        },
                        {
                            id: "month_end_balance",
                            title: "Balances as on the end of the month",
                            description: "Your balance at the end of each month."
                        },
                        {
                            id: "daily_balance",
                            title: "End of day balances for every day of the month",
                            description: "Your end-of-day account balances."
                        }
                    ]
                },
                {
                    id: "transaction",
                    title: "Transaction Summary",
                    description: "This section shows the overall picture of money moving in and out of your accounts. We look at these patterns to keep your account safe and follow banking rules, while using privacy technology to avoid seeing the details of individual transactions.",
                    dataPoints: [
                        {
                            id: "total_amount_credit",
                            title: "Total amount credited to the user's account",
                            description: "Total money coming into your account."
                        },
                        {
                            id: "total_amount_debited",
                            title: "Total amount debited from the user's account",
                            description: "Total money going out of your account."
                        },
                        {
                            id: "six_month",
                            title: "The 6 month average salary of the user",
                            description: "Your typical monthly income based on the last six months."
                        },
                        {
                            id: "monthly_cash_deposited",
                            title: "The monthly cash deposit to total credit amount ratio",
                            description: "How much of your incoming money is cash deposits."
                        },
                        {
                            id: "total_number_cheque_bounces",
                            title: "Total number of outward cheque bounces",
                            description: "How many checks couldn't be processed due to insufficient funds."
                        }
                    ]
                },
                {
                    id: "expense_analysis",
                    title: "Expense Analysis",
                    description: "This section organizes your spending into categories to help you understand your money habits. We use privacy technology to group your expenses without seeing the specific purchases, helping you track your budget while protecting your privacy.",
                    dataPoints: [
                        {
                            id: "classification_users_monthly_expenses",
                            title: "Betting and Cash Withdrawal Flags",
                            description: "Groups your spending into categories like groceries and utilities."
                        }
                    ]
                },
                {
                    id: "financial_ratios",
                    title: "Financial Ratios",
                    description: "These are measurements that help understand your overall financial wellbeing. We calculate these numbers using privacy technology that protects your personal information while helping assess eligibility for financial services.",
                    dataPoints: [
                        {
                            id: "foir",
                            title: "Financial Obligation Ratio (FOIR)",
                            description: "Shows how much of your income goes to regular payments."
                        },
                        {
                            id: "betting_withdrawl_flags",
                            title: "Betting and Cash Withdrawal Flags",
                            description: "Helps identify potentially concerning transaction patterns."
                        }
                    ]
                }
            ]
        };
        
        function createCategorySection(category) {
            const section = document.createElement('div');
            section.className = 'category-section';
            
            // Main category content
            section.innerHTML = `
                <div class="category-main">
                    <div class="category-header">
                        <div class="checkbox-container">
                            <input type="checkbox" id="${category.id}">
                            <div class="checkbox-label">
                                <label for="${category.id}" class="data-title">${category.title}</label>
                            </div>
                        </div>
                    </div>
                    <div class="description-container">
                        <div class="data-description" id="desc-${category.id}">${category.description}</div>
                        <span class="read-more" onclick="toggleDescription('desc-${category.id}', this)">Read more</span>
                    </div>
                </div>
                <button class="sub-options-toggle" onclick="toggleSubOptions('${category.id}')">
                    View Options
                    <span class="toggle-icon">▼</span>
                </button>
                <div class="sub-options" id="sub-${category.id}">
                    ${category.dataPoints.map(point => `
                        <div class="data-point">
                            <div class="checkbox-container">
                                <input type="checkbox" id="${point.id}">
                                <div class="checkbox-label">
                                    <label for="${point.id}" class="data-title">${point.title}</label>
                                    <div class="description-container">
                                        <div class="data-description" id="desc-${point.id}">${point.description}</div>
                                        <span class="read-more" onclick="toggleDescription('desc-${point.id}', this)">Read more</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            return section;
        }

        function toggleDescription(descId, button) {
            const description = document.getElementById(descId);
            description.classList.toggle('expanded');
            button.textContent = description.classList.contains('expanded') ? 'Read less' : 'Read more';
        }

        function toggleSubOptions(categoryId) {
            const subOptions = document.getElementById(`sub-${categoryId}`);
            const button = subOptions.previousElementSibling;
            const icon = button.querySelector('.toggle-icon');
            
            subOptions.classList.toggle('expanded');
            icon.classList.toggle('rotated');
            button.textContent = subOptions.classList.contains('expanded') ? 'Hide Options ' : 'View Options ';
            button.appendChild(icon);
        }

        function setupCheckboxes(section) {
            const mainCheckbox = section.querySelector('.category-header input[type="checkbox"]');
            const subCheckboxes = section.querySelectorAll('.sub-options input[type="checkbox"]');
            
            mainCheckbox.addEventListener('change', () => {
                subCheckboxes.forEach(checkbox => {
                    checkbox.checked = mainCheckbox.checked;
                });
            });

            subCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const allChecked = Array.from(subCheckboxes).every(cb => cb.checked);
                    const anyChecked = Array.from(subCheckboxes).some(cb => cb.checked);
                    mainCheckbox.checked = allChecked;
                    mainCheckbox.indeterminate = anyChecked && !allChecked;
                });
            });
        }

        function initialize() {
            const container = document.getElementById('options-container');
            pageContent.categories.forEach(category => {
                const section = createCategorySection(category);
                container.appendChild(section);
                setupCheckboxes(section);
            });
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>